$ rm -rf d
$ mkdir d
$ cd d

$ chown bin .
$ su bin

$ touch x
$ richacl --set 'everyone@:rw::allow' x
$ ls -l x | cut -d ' ' -f 1
> -rw-rw-rw-

$ richacl --get x
> # file: x
> # owner: bin
> # group: bin
>  everyone@:rw-----------::allow
>

$ chmod 664 x
$ ls -l x | cut -d ' ' -f 1
> -rw-rw-r--

$ richacl --get x
> # file: x
> # owner: bin
> # group: bin
>     owner@:rw-----------::allow
>     group@:rw-----------::allow
>  everyone@:r------------::allow
>

$ mkdir sub 
$ richacl --set 'everyone@:rwax:fd:allow' sub
$ ls -dl sub | cut -d ' ' -f 1
> drwxrwxrwx

$ richacl --get sub
> # file: sub
> # owner: bin
> # group: bin
>  everyone@:rwax---------:fd:allow
>

$ chmod 775 sub
$ ls -dl sub | cut -d ' ' -f 1
> drwxrwxr-x

$ richacl --get sub
> # file: sub
> # owner: bin
> # group: bin
>     owner@:rwax---------::allow
>     group@:rwax---------::allow
>  everyone@:rwax---------:fdi:allow
>  everyone@:r--x---------::allow
>

$ touch sub/f
$ ls -l sub/f | cut -d ' ' -f 1
> -rw-rw-rw-

$ richacl --get sub/f
> # file: sub/f
> # owner: bin
> # group: bin
>  everyone@:rwa----------::allow
>

$ mkdir sub/sub2
$ ls -dl sub/sub2 | cut -d ' ' -f 1
> drwxrwxrwx

$ richacl --get sub/sub2
> # file: sub/sub2
> # owner: bin
> # group: bin
>  everyone@:rwax---------:fd:allow
>

$ su
$ cd ..
$ rm -rf d
